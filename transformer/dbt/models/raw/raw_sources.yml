version: 2

sources:
  - name: raw
    description: "Fontes raw para o pipeline dbt."
    database: dw
    schema: dbt_raw

    quoting:
      database: false
      schema: false
      identifier: false

    tables:
      - name: airlines
        description: "Dados raw das companhias a√©reas."
        tests:
          - not_empty
          - required_columns:
              columns: ["iata_code", "airline"]

        columns:
          - name: iata_code
          - name: airline

      - name: airports
        description: "Dados raw dos aeroportos."
        tests:
          - not_empty
          - required_columns:
              columns:
                [
                  "iata_code",
                  "airport",
                  "city",
                  "state",
                  "country",
                  "latitude",
                  "longitude",
                ]

        columns:
          - name: iata_code
          - name: airport
          - name: city
          - name: state
          - name: country
          - name: latitude
          - name: longitude

      - name: flights
        description: "Dados raw dos voos."
        tests:
          - not_empty
          - required_columns:
              columns:
                [
                  "year",
                  "month",
                  "day",
                  "day_of_week",
                  "airline",
                  "flight_number",
                  "tail_number",
                  "origin_airport",
                  "destination_airport",
                  "scheduled_departure",
                  "departure_time",
                  "departure_delay",
                  "taxi_out",
                  "wheels_off",
                  "scheduled_time",
                  "elapsed_time",
                  "air_time",
                  "distance",
                  "wheels_on",
                  "taxi_in",
                  "scheduled_arrival",
                  "arrival_time",
                  "arrival_delay",
                  "diverted",
                  "cancelled",
                  "cancellation_reason",
                  "air_system_delay",
                  "security_delay",
                  "airline_delay",
                  "late_aircraft_delay",
                  "weather_delay",
                ]

        columns:
          - name: year
          - name: month
          - name: day
          - name: day_of_week
          - name: airline
          - name: flight_number
          - name: tail_number
          - name: origin_airport
          - name: destination_airport
          - name: scheduled_departure
          - name: departure_time
          - name: departure_delay
          - name: taxi_out
          - name: wheels_off
          - name: scheduled_time
          - name: elapsed_time
          - name: air_time
          - name: distance
          - name: wheels_on
          - name: taxi_in
          - name: scheduled_arrival
          - name: arrival_time
          - name: arrival_delay
          - name: diverted
          - name: cancelled
          - name: cancellation_reason
          - name: air_system_delay
          - name: security_delay
          - name: airline_delay
          - name: late_aircraft_delay
          - name: weather_delay
